/* PartnerWallet.css */
@import "src/styles/partner/PartnerTokens.css";

/* Escopo seguro */
.pml-wrap .wallet-page, .pml-wrap .wallet-page * { box-sizing: border-box; }

.pml-wrap .wallet-page{
  background: linear-gradient(180deg, var(--c-fourth) 0%, var(--c-third) 100%);
  border-radius: var(--radius-lg);
  padding: 12px;
  display: grid;
  gap: 14px;
  /* Não cortar overflow horizontal para não esconder colunas no mobile */
  overflow-x: visible;
}

/* ===== Cards/Métricas ===== */
.pml-wrap .wallet-page .wallet-metrics{
  display: grid; gap: 10px;
  grid-template-columns: repeat(2, minmax(0,1fr));
}
@media (min-width: 768px){
  .pml-wrap .wallet-page .wallet-metrics{ grid-template-columns: repeat(4, minmax(0,1fr)); }
}

.pml-wrap .wallet-page .wm-card{
  position: relative;
  background: rgba(255,255,255,.75);
  border: 1px solid rgba(46,148,185,.25);
  border-radius: var(--radius-lg);
  padding: 12px;
  color: var(--c-second);
  box-shadow: var(--shadow-3d);
  backdrop-filter: blur(6px);
}
.pml-wrap .wallet-page .wm-head{ display:flex; align-items:center; gap:6px; font-size:12px; color: var(--c-second); opacity:.9; }
.pml-wrap .wallet-page .wm-value{ font-size: 22px; font-weight: 900; margin: 6px 0 2px; color: var(--c-second); }
.pml-wrap .wallet-page .wm-sub{ font-size: 12px; color: var(--muted); }
.pml-wrap .wallet-page .wm-actions{ display:flex; gap:6px; margin-top:8px; flex-wrap: wrap; }
.pml-wrap .wallet-page .wm-actions button,
.pml-wrap .wallet-page .wm-actions input[type="month"],
.pml-wrap .wallet-page .wm-actions select{
  border:1px solid rgba(46,148,185,.28);
  background:#f8fdff;
  color: var(--c-second);
  border-radius: 10px;
  padding: 8px 10px;
  font-size: 12px;
  cursor: pointer;
}
.pml-wrap .wallet-page .wm-actions button:hover{ background:#eef6fb; }

/* Temas leves */
.pml-wrap .wallet-page .wm-blue   { background: linear-gradient(180deg, rgba(46,148,185,.08), rgba(46,148,185,.05)); }
.pml-wrap .wallet-page .wm-green  { background: linear-gradient(180deg, rgba(16,185,129,.10), rgba(16,185,129,.06)); }
.pml-wrap .wallet-page .wm-orange { background: linear-gradient(180deg, rgba(245,158,11,.10),  rgba(245,158,11,.06)); }
.pml-wrap .wallet-page .wm-purple { background: linear-gradient(180deg, rgba(99,102,241,.10),  rgba(99,102,241,.06)); }

/* ===== Filtro STATUS ===== */
.pml-wrap .wallet-page .wallet-filters{ display:flex; align-items:center; gap:8px; flex-wrap:wrap; padding: 2px 0; }
.pml-wrap .wallet-page .status-dd{
  position:relative; display:inline-flex; align-items:center; gap:8px;
  background:#ffffff; border:1px solid rgba(46,148,185,.25);
  border-radius:12px; padding:8px 10px; color:var(--c-second);
}
.pml-wrap .wallet-page .status-dd .status-dd-btn{
  display:inline-flex; align-items:center; gap:6px; border:0; background:transparent; cursor:pointer;
  font-weight:800; font-size:13px; color:var(--c-second); padding:4px 6px; border-radius:6px;
}
.pml-wrap .wallet-page .status-dd .status-dd-btn:hover{ background:#f0fbff; }
.pml-wrap .wallet-page .status-dd .status-dd-menu{
  position:absolute; left:0; top:calc(100% + 6px); min-width: 180px;
  background:#fff; color:var(--c-second);
  border:1px solid rgba(46,148,185,.25); border-radius:12px; padding:6px; z-index:20; box-shadow: var(--shadow-3d);
}
.pml-wrap .wallet-page .status-dd .status-dd-item{
  width:100%; text-align:left; border:0; background:transparent; cursor:pointer;
  padding:8px 10px; border-radius:8px; font-size:13px; color:var(--c-second);
}
.pml-wrap .wallet-page .status-dd .status-dd-item:hover{ background:#eef6fb; }
.pml-wrap .wallet-page .status-dd .status-dd-item.active{ background: rgba(46,148,185,.14); font-weight:800; }

/* chips de status */
.pml-wrap .wallet-page .wf-status.status-theme--SHARED   { background: rgba(46,148,185,.14); border-color: rgba(46,148,185,.28); color:#0b3a4a; }
.pml-wrap .wallet-page .wf-status.status-theme--APPROVED { background: rgba(16,185,129,.14); border-color: rgba(16,185,129,.30); color:#064e3b; }
.pml-wrap .wallet-page .wf-status.status-theme--PAID     { background: rgba(16,185,129,.14); border-color: rgba(16,185,129,.30); color:#064e3b; }
.pml-wrap .wallet-page .wf-status.status-theme--ON_HOLD  { background: rgba(148,163,184,.18); border-color: rgba(148,163,184,.30); color:#334155; }
.pml-wrap .wallet-page .wf-status.status-theme--DECLINED { background: rgba(239,68,68,.16);  border-color: rgba(239,68,68,.28);  color:#7f1d1d; }
.pml-wrap .wallet-page .wf-status.status-theme--PENDING  { background: rgba(245,158,11,.16);  border-color: rgba(245,158,11,.30);  color:#78350f; }

/* ===== Lista ===== */
.pml-wrap .wallet-page .wallet-section{ display:grid; gap:10px; }
.pml-wrap .wallet-page .ws-title{ font-weight:900; color: var(--c-second); }
.pml-wrap .wallet-page .wallet-empty{
  background:#ffffff; border:1px dashed rgba(46,148,185,.35);
  border-radius:12px; padding:16px; color:var(--muted); text-align:center;
}

.pml-wrap .wallet-page .wallet-item{
  background:#fff; border:1px solid rgba(46,148,185,.25);
  border-radius:12px; padding:12px; display:grid; gap:10px; color:var(--c-second);
  box-shadow: var(--shadow-3d);
}

.pml-wrap .wallet-page .wi-type{ font-weight:900; display:flex; align-items:center; gap:6px; }

.pml-wrap .wallet-page .tag{
  font-size:11px; font-weight:800; padding:4px 10px; border-radius:999px; text-transform:uppercase; letter-spacing:.2px;
  border:1px solid rgba(46,148,185,.28); background:#f0fbff; color:#0b3a4a;
}
.pml-wrap .wallet-page .tag.approved{ background:#ecfdf5; color:#065f46; border-color:#a7f3d0; }
.pml-wrap .wallet-page .tag.paid{ background:#eef2ff;  color:#3730a3; border-color:#c7d2fe; }
.pml-wrap .wallet-page .tag.shared{ background:#e0f2fe; color:#1e3a8a; border-color:#bae6fd; }
.pml-wrap .wallet-page .tag.pending{ background:#fff7ed; color:#9a3412; border-color:#fed7aa; }
.pml-wrap .wallet-page .tag.on_hold{ background:#f1f5f9; color:#334155; border-color:#cbd5e1; }
.pml-wrap .wallet-page .tag.declined{ background:#fef2f2; color:#991b1b; border-color:#fecaca; }

/* grid dos metadados */
.pml-wrap .wallet-page .wi-row{ display:grid; grid-template-columns: 120px 1fr; gap: 6px; }
.pml-wrap .wallet-page .wi-row span{ font-size: 12px; color: var(--muted); }
.pml-wrap .wallet-page .wi-row strong{ color: var(--c-second); font-weight:800; }
.pml-wrap .wallet-page .wi-side{ display:flex; align-items:center; justify-content:space-between; gap:8px; flex-wrap:wrap; }
.pml-wrap .wallet-page .wi-price{ font-weight:900; color: #1e7a59; font-size: 16px; }
.pml-wrap .wallet-page .wi-actions{ display:flex; gap:8px; flex-wrap:wrap; }
.pml-wrap .wallet-page .wi-approve,
.pml-wrap .wallet-page .wi-reject{
  border:1px solid rgba(46,148,185,.28); border-radius:10px; padding:8px 10px; font-weight:800; cursor:pointer; background:#f8fdff;
  color:var(--c-second); transition: transform .08s ease, box-shadow .2s ease, background .2s;
}
.pml-wrap .wallet-page .wi-approve:hover{ background:#ecfdf5; box-shadow: 0 8px 18px rgba(16,185,129,.18); }
.pml-wrap .wallet-page .wi-reject:hover{ background:#fef2f2; box-shadow: 0 8px 18px rgba(239,68,68,.18); }

/* ===== Breakdown (container) ===== */
.pml-wrap .wallet-page .breakdown-box{ margin-top:6px; overflow:hidden; }
.pml-wrap .wallet-page .bd-toggle{
  display:flex; align-items:center; justify-content:space-between; width:100%;
  gap:8px; padding:8px 10px; border:1px solid rgba(46,148,185,.28); border-radius:10px;
  background:#f8fdff; cursor:pointer; font-weight:800; font-size:12px; color:var(--c-second);
}
.pml-wrap .wallet-page .bd-toggle:hover{ background:#eef6fb; }
.pml-wrap .wallet-page .breakdown-box[data-open="false"] .wpay-breakdown{ display:none; }

.pml-wrap .wallet-page .wpay-breakdown{
  border:1px solid #e2e8f0; border-radius:12px; background:#fff; color:#0f172a;
  padding: 10px; max-height: 340px;
  overflow-y: auto; overflow-x: auto; box-shadow: inset 0 3px 14px rgba(2,6,23,.06);
}
.pml-wrap .wallet-page .wpay-head{ font-size:12px; font-weight:900; color:#334155; margin-bottom:6px; }

/* ===== Tabela (base) ===== */
.pml-wrap .wallet-page .table.table--breakdown{ width:100%; max-width:100%; min-width: 900px; background: transparent; }
.pml-wrap .wallet-page .table.table--breakdown .thead,
.pml-wrap .wallet-page .table.table--breakdown .tbody .tr{
  display:grid; gap:6px; align-items:center;
  grid-template-areas:"date client service park guests amount";
  grid-template-columns:
    minmax(92px,120px)
    minmax(140px,1fr)
    minmax(180px,1.2fr)
    minmax(120px,.9fr)
    minmax(84px,.6fr)
    minmax(120px,140px);
}
.pml-wrap .wallet-page .table.table--breakdown .thead{
  position: sticky; top: 0; z-index: 1; padding: 8px 0;
  background: #f0fbff; border-bottom: 1px solid #e2e8f0;
}
.pml-wrap .wallet-page .table.table--breakdown .th{ font-size:12px; font-weight:800; color:#475569; white-space:nowrap; }
.pml-wrap .wallet-page .table.table--breakdown .tbody .tr{
  padding:8px 0; border-bottom:1px solid #e2e8f0; background:#fff;
  cursor: pointer; /* linha clicável */
  transition: background .15s ease;
}
.pml-wrap .wallet-page .table.table--breakdown .tbody .tr:hover{ background:#f8fdff; }
.pml-wrap .wallet-page .table.table--breakdown .tbody .tr:nth-child(odd){ background:#f8fafc; }
.pml-wrap .wallet-page .table.table--breakdown .tbody .tr:last-child{ border-bottom:0; }

.pml-wrap .wallet-page .table.table--breakdown .td{
  font-size:13px; min-width:0; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; color:#0f172a;
}
.pml-wrap .wallet-page .table.table--breakdown .td .main{ font-weight:800; color:#0f172a; }
/* NUNCA mostrar subtítulo/obs sob o serviço (fica só no expand) */
.pml-wrap .wallet-page .table.table--breakdown .td .sub{ display:none; }
.pml-wrap .wallet-page .table.table--breakdown .right{ text-align:right; }
.pml-wrap .wallet-page .table.table--breakdown .center{ text-align:center; }

/* map áreas */
.pml-wrap .wallet-page .table.table--breakdown .thead .th:nth-child(1){ grid-area: date; }
.pml-wrap .wallet-page .table.table--breakdown .thead .th:nth-child(2){ grid-area: client; }
.pml-wrap .wallet-page .table.table--breakdown .thead .th:nth-child(3){ grid-area: service; }
.pml-wrap .wallet-page .table.table--breakdown .thead .th:nth-child(4){ grid-area: park; }
.pml-wrap .wallet-page .table.table--breakdown .thead .th:nth-child(5){ grid-area: guests; }
.pml-wrap .wallet-page .table.table--breakdown .thead .th:nth-child(6){ grid-area: amount; }
.pml-wrap .wallet-page .table.table--breakdown .tbody .td:nth-child(1){ grid-area: date; }
.pml-wrap .wallet-page .table.table--breakdown .tbody .td:nth-child(2){ grid-area: client; }
.pml-wrap .wallet-page .table.table--breakdown .tbody .td:nth-child(3){ grid-area: service; }
.pml-wrap .wallet-page .table.table--breakdown .tbody .td:nth-child(4){ grid-area: park; }
.pml-wrap .wallet-page .table.table--breakdown .tbody .td:nth-child(5){ grid-area: guests; text-align:center; }
.pml-wrap .wallet-page .table.table--breakdown .tbody .td:nth-child(6){ grid-area: amount; text-align:right; }

/* ===== EXPAND DA LINHA (click na linha) ===== */
.pml-wrap .wallet-page .srv-row .amount{
  display:flex; align-items:center; justify-content:flex-end; gap:8px;
}
.pml-wrap .wallet-page .srv-toggle{ display:none !important; } /* botão removido */

/* Fechada: sem espaço no layout (sem padding/margin/borda) */
.pml-wrap .wallet-page .srv-extra{
  grid-column: 1 / -1;
  max-height: 0;
  opacity: 0;
  overflow: hidden;
  padding: 0;
  margin-top: 0;
  border: 0;
  transition: max-height .22s ease, opacity .18s ease, padding .22s ease, margin-top .22s ease, border-width .22s ease;
}
/* Aberta: entra no fluxo com espaçamento e borda */
.pml-wrap .wallet-page .srv-row.is-open .srv-extra{
  max-height: 240px;
  opacity: 1;
  padding: 10px;
  margin-top: 6px;
  border: 1px dashed #cbd5e1;
  border-radius: 10px;
  background:#f8fafc; color:#0f172a;
}

.pml-wrap .wallet-page .srv-extra .chip{
  display:inline-block; font-size:10px; font-weight:900; padding:2px 6px; border-radius:999px;
  border:1px solid #fed7aa; background:#fff7ed; color:#9a3412; margin-right:8px;
}
.pml-wrap .wallet-page .srv-extra .muted{ color:#94a3b8; }

/* ===== Mobile (vertical): mostrar colunas + tipografia fluida ===== */
@media (max-width: 640px), (orientation: portrait) {
  .pml-wrap .wallet-page .wpay-breakdown{ max-height: 60vh; overflow-x: auto; }
  .pml-wrap .wallet-page .table.table--breakdown{ min-width: 900px; } /* mantém scroll x */
  /* remover sticky para Safari/Chrome iOS não colapsarem colunas */
  .pml-wrap .wallet-page .table.table--breakdown .thead{ position: static; }

  /* tipografia fluida */
  .pml-wrap .wallet-page .table.table--breakdown .th{
    font-size: clamp(11px, 3.2vw, 13px);
  }
  .pml-wrap .wallet-page .table.table--breakdown .td{
    font-size: clamp(11px, 3.0vw, 13px);
  }
  .pml-wrap .wallet-page .wpay-head{
    font-size: clamp(11px, 3.0vw, 12px);
  }
}

/* Paginação */
.pml-wrap .wallet-page .ap-pagination{ display:flex; align-items:center; justify-content:center; gap:12px; margin-top:12px; }
.pml-wrap .wallet-page .ap-btn{
  width:42px; height:42px; display:inline-flex; align-items:center; justify-content:center;
  border:1px solid rgba(46,148,185,.28); border-radius:12px; background:#fff; box-shadow: 0 1px 2px rgba(2,6,23,.08);
  cursor:pointer; transition: transform .12s ease, box-shadow .2s ease, background .2s ease; color:var(--c-second);
}
.pml-wrap .wallet-page .ap-btn:hover{ transform: translateY(-1px); box-shadow: 0 6px 16px rgba(2,6,23,.12); }
.pml-wrap .wallet-page .ap-btn:disabled{ opacity:.5; cursor:not-allowed; transform:none; }
.pml-wrap .wallet-page .ap-indicator{
  padding:8px 12px; border-radius:999px; font-weight:900;
  background:#f0fbff; color:var(--c-second); border:1px solid rgba(46,148,185,.28); font-size:12px;
}

/* Modal reject */
.pml-wrap .wallet-page .wl-overlay{ position: fixed; inset:0; background: rgba(2,6,23,.46); backdrop-filter: blur(2px); display:flex; align-items:center; justify-content:center; z-index:1200; }
.pml-wrap .wallet-page .wl-modal{
  width:min(560px,92vw); background:#fff; border:1px solid #E2E8F0; border-radius:16px;
  box-shadow: 0 20px 55px rgba(2,6,23,.22), 0 4px 12px rgba(2,6,23,.14);
  padding:18px; animation: wl-pop .18s ease-out; color:#0f172a;
}
@keyframes wl-pop{ from{ transform: translateY(6px) scale(.98); opacity:0; } to{ transform: translateY(0) scale(1); opacity:1; } }
.pml-wrap .wallet-page .btn-cancel{
  border:1px solid #E2E8F0; border-radius:10px; padding:10px 12px; background:#fff; cursor:pointer; font-weight:800; color:#334155;
}
.pml-wrap .wallet-page .btn-danger{
  display:inline-flex; align-items:center; gap:6px;
  border:1px solid #fecaca; border-radius:10px; padding:10px 12px; cursor:pointer; font-weight:900;
  background: linear-gradient(135deg, #ff8a8a 0%, #e53e3e 100%); color:#fff; box-shadow: 0 8px 22px rgba(229,62,62,.20);
}
